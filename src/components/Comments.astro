---
// Disqus 댓글 컴포넌트 — 게스트 댓글 가능 (로그인 선택)
// https://disqus.com/admin/create/ 에서 shortname 발급 필요
const DISQUS_SHORTNAME = 'blog-wonderx-co-kr';
const pageUrl = `https://blog.wonderx.co.kr${Astro.url.pathname}`;
const pageId = Astro.url.pathname;
const pageTitle = Astro.props.title || '';
---

<div class="comments-wrapper">
  <p class="comments-title">댓글</p>
  <div id="disqus_thread"></div>
  <script is:inline define:vars={{ DISQUS_SHORTNAME, pageUrl, pageId, pageTitle }}>
    var disqus_config = function () {
      this.page.url = pageUrl;
      this.page.identifier = pageId;
      this.page.title = pageTitle;
    };
    (function() {
      if (!DISQUS_SHORTNAME) return;
      var d = document, s = d.createElement('script');
      s.src = 'https://' + DISQUS_SHORTNAME + '.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>댓글을 보려면 JavaScript를 활성화해주세요.</noscript>
</div>

<style>
  .comments-wrapper {
    max-width: var(--content-width);
    margin: 0 auto;
    padding: 3rem 0 4rem;
    border-top: 1px solid var(--wx-border);
  }

  .comments-title {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    color: var(--wx-muted);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 1.5rem;
  }
</style>
